function getLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(startPosition):alert("La geo-localizzazione NON è possibile")}function startPosition(n){var u=document.getElementById("Telemetrie"),t=n.coords.latitude,i=n.coords.longitude,r;route.push({lat:t,lng:i});r={Longitude:i,Latitude:t,Moment:(new Date).toISOString()};sendTelemetry(r);u.innerHTML+="<br>"+t+","+i+"<br>"+(new Date).toISOString()+"<br>";map=new google.maps.Map(document.getElementById("map"),{center:{lat:t,lng:i},zoom:12});marker=new google.maps.Marker({position:{lat:t,lng:i},map:map});marker2=new google.maps.Marker({position:{lat:t,lng:i},map:map})}function getMoveLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(movePosition):alert("La geo-localizzazione NON è possibile")}function movePosition(n){var u=document.getElementById("Telemetrie"),t=n.coords.latitude,i=n.coords.longitude,f={Longitude:i,Latitude:t,Moment:(new Date).toISOString()},r;sendTelemetry(f);route.push({lat:t,lng:i});marker2.setPosition({lat:t,lng:i});r=new google.maps.Polyline({path:route,geodesic:!0,strokeColor:"#ffc266",strokeOpacity:1,strokeWeight:3});r.setMap(map);u.innerHTML+="<br>"+t+","+i+"<br>"+(new Date).toISOString()+"<br>";map.setCenter({lat:t,lng:i})}function startStopGeoL(){state=!state;state===!0?interval=setInterval(getMoveLocation,2500):interval&&clearInterval(interval)}function sendTelemetry(n){$.ajax({type:"POST",url:"Run/SendTelemetry",data:JSON.stringify(n),headers:{Accept:"application/json","Content-Type":"application/json"},dataType:"json",success:function(){}})}var map,state=!1,interval,route=[],marker,marker2;getLocation();